# cordova-plugin-qrscanner-tests

This is the Cordova Testing Framework project for `cordova-plugin-qrscanner`.

To generate this package, clone and `npm install` the `cordova-plugin-qrscanner`, and then run `npm run manual-tests` inside that project.

Becuase this project requires `cordova-plugin-qrscanner` and it's tests as plugins, building this project inside the `cordova-plugin-qrscanner` directory would cause an infinite recursion.

Since `cordova prepare` is not intended to handle this scenario (which may at some point be resolved/added by the Cordova CLI), this package is first copied into a sibling directory called `cordova-plugin-test-projects`. The path from the root of `cordova-plugin-qrscanner` is `../cordova-plugin-test-projects/cordova-plugin-qrscanner-tests/`.

## Running Tests

Run the app on each platform to test functionality. The "Auto Tests" run a sanity check on the plugin's globally exposed javascript interface. The "Manual Tests" allow for human confirmation that each function performs as expected.

### iOS

Run tests on connected device: `cordova run ios --device`

Run tests on ios simulator: `cordova emulate ios`

Open test project in xcode: `open platforms/ios/HelloCordova.xcodeproj/`

XCode will usually ask if you'd like to "Convert [the project] to [the] Latest Swift Syntax" – the plugin uses the latest syntax, but the project generated by `cordova build` doesn't seem to verify this for XCode. It's safe to ignore ("Cancel") the dialog.

## Other Notes

We use a timestamp in the `config.xml`'s `<widget>` `id` field so the app has a different identifier for each build. This allows us to test user-granted permissions – as if the app has never been installed – every time we re-build.

The seemingly unecessary dependency on `lodash-node` prevents an occasional and elusive bug in the `cordova build` command.
